.reader-main{padding:140px 0 60px;min-height:100vh}
.reader-container{max-width:800px;margin:0 auto;background:rgba(30,58,95,.2);border:1px solid rgba(76,201,240,.2);border-radius:20px;padding:40px;backdrop-filter:blur(10px);box-shadow:0 20px 40px rgba(10,26,45,.3)}
.reader-header-controls{display:flex;align-items:center;gap:20px;margin-left:auto}
.reader-btn{padding:10px 20px;background:rgba(76,201,240,.15);border:1px solid rgba(76,201,240,.3);border-radius:8px;color:var(--sky-blue);font-size:16px;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:8px}
.reader-btn:hover{background:rgba(76,201,240,.25);border-color:var(--sky-blue);transform:translateY(-2px)}
.reader-progress-info{color:var(--text-gray);font-size:14px;background:rgba(76,201,240,.1);padding:8px 16px;border-radius:8px;border:1px solid rgba(76,201,240,.2)}
.book-header{margin-bottom:30px;text-align:center;padding-bottom:20px;border-bottom:1px solid rgba(76,201,240,.2)}
.book-header h1{font-size:32px;margin-bottom:10px;color:var(--text-light);line-height:1.3}
.book-meta-info{display:flex;justify-content:center;align-items:center;gap:20px;color:var(--text-gray);font-size:16px}
.book-format-tag{background:rgba(76,201,240,.15);border:1px solid rgba(76,201,240,.3);padding:4px 12px;border-radius:12px;font-size:12px;font-weight:600;color:var(--sky-blue)}
.reader-content-wrapper{margin:30px 0;position:relative}
.reader-content{font-size:18px;line-height:1.8;color:var(--text-light);min-height:400px;max-height:60vh;overflow-y:auto;padding:20px;background:rgba(10,26,45,.2);border-radius:12px;border:1px solid rgba(76,201,240,.1)}
.reader-content::-webkit-scrollbar{width:8px}
.reader-content::-webkit-scrollbar-track{background:rgba(76,201,240,.1);border-radius:4px}
.reader-content::-webkit-scrollbar-thumb{background:var(--sky-blue);border-radius:4px}
.reader-content::-webkit-scrollbar-thumb:hover{background:var(--light-blue)}
.reading-controls{margin-top:30px;padding-top:20px;border-top:1px solid rgba(76,201,240,.2)}
.page-controls{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}
.page-btn{padding:12px 24px;background:rgba(76,201,240,.15);border:1px solid rgba(76,201,240,.3);border-radius:8px;color:var(--sky-blue);font-size:16px;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:8px}
.page-btn:hover:not(:disabled){background:rgba(76,201,240,.25);border-color:var(--sky-blue);transform:translateY(-2px)}
.page-btn:disabled{opacity:.5;cursor:not-allowed}
.page-info{color:var(--text-gray);font-size:16px;font-weight:500}
.progress-container{margin-bottom:20px}
.reading-progress{height:6px;background:rgba(76,201,240,.1);border-radius:3px;overflow:hidden}
.reading-progress .progress-fill{height:100%;background:var(--ocean-gradient);border-radius:3px;transition:width .3s ease}
.reader-tools{display:flex;justify-content:center;gap:15px}
.tool-btn{width:44px;height:44px;background:rgba(76,201,240,.15);border:1px solid rgba(76,201,240,.3);border-radius:50%;color:var(--sky-blue);font-size:18px;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center}
.tool-btn:hover{background:rgba(76,201,240,.25);border-color:var(--sky-blue);transform:translateY(-2px)scale(1.1)}
body.reader-theme-light{--text-light:#1a1a1a;--text-gray:#666;background:#f5f5f5}
body.reader-theme-light .reader-content{background:white;color:#333}
body.reader-theme-light .reader-container{background:rgba(255,255,255,.9);border-color:rgba(0,0,0,.1)}
body.reader-theme-light .reader-btn,body.reader-theme-light .page-btn,body.reader-theme-light .tool-btn{background:rgba(0,0,0,.05);border-color:rgba(0,0,0,.1);color:#333}
body.reader-theme-sepia{--text-light:#5c4b37;--text-gray:#8b7a66;background:#fbf0d9}
body.reader-theme-sepia .reader-content{background:#f5e5c9;color:#5c4b37}
body.reader-theme-sepia .reader-container{background:rgba(245,229,201,.9);border-color:rgba(92,75,55,.2)}
body.reader-theme-sepia .reader-btn,body.reader-theme-sepia .page-btn,body.reader-theme-sepia .tool-btn{background:rgba(92,75,55,.1);border-color:rgba(92,75,55,.2);color:#5c4b37}
.font-size-controls,.theme-controls,.spacing-controls{display:flex;gap:10px;margin-top:10px}
.font-size-btn,.theme-btn,.spacing-btn{padding:10px 20px;background:rgba(76,201,240,.1);border:1px solid rgba(76,201,240,.2);border-radius:8px;color:var(--text-light);cursor:pointer;transition:all .3s ease;flex:1}
.font-size-btn.active,.theme-btn.active,.spacing-btn.active{background:var(--sky-blue);border-color:var(--sky-blue);color:white}
.font-size-btn:hover:not(.active),.theme-btn:hover:not(.active),.spacing-btn:hover:not(.active){background:rgba(76,201,240,.2);border-color:var(--sky-blue)}
.theme-preview{width:24px;height:24px;border-radius:4px;margin:0 auto 5px}
.theme-preview.dark{background:var(--primary-dark);border:1px solid var(--sky-blue)}
.theme-preview.light{background:white;border:1px solid #ccc}
.theme-preview.sepia{background:#f5e5c9;border:1px solid #8b7a66}
.font-select{width:100%;padding:12px;background:rgba(76,201,240,.1);border:1px solid rgba(76,201,240,.2);border-radius:8px;color:var(--text-light);font-size:16px;margin-top:10px}
.font-select:focus{outline:none;border-color:var(--sky-blue);background:rgba(76,201,240,.15)}
.search-input-group{display:flex;gap:10px;margin-bottom:20px}
.search-input-group input{flex:1;padding:12px;background:rgba(76,201,240,.1);border:1px solid rgba(76,201,240,.2);border-radius:8px;color:var(--text-light);font-size:16px}
.search-input-group input:focus{outline:none;border-color:var(--sky-blue);background:rgba(76,201,240,.15)}
.search-results{max-height:300px;overflow-y:auto;border:1px solid rgba(76,201,240,.2);border-radius:8px;padding:10px}
.search-result-item{padding:10px;border-bottom:1px solid rgba(76,201,240,.1);cursor:pointer;transition:background .3s ease}
.search-result-item:hover{background:rgba(76,201,240,.1)}
.search-result-item:last-child{border-bottom:none}
.search-result-context{color:var(--text-gray);font-size:14px;margin-top:5px}
.search-highlight{background:rgba(255,235,59,.3);padding:2px 4px;border-radius:4px;color:var(--text-light)}
.font-size-small .reader-content{font-size:14px}
.font-size-medium .reader-content{font-size:18px}
.font-size-large .reader-content{font-size:22px}
.font-size-xlarge .reader-content{font-size:26px}
.spacing-tight .reader-content{line-height:1.4}
.spacing-normal .reader-content{line-height:1.8}
.spacing-wide .reader-content{line-height:2.2}
@media (max-width:768px){.reader-container{padding:20px}.book-header h1{font-size:24px}.reader-content{font-size:16px;padding:15px}.page-controls{flex-direction:column;gap:15px}.page-btn{width:100%;justify-content:center}.reader-header-controls{flex-direction:column;gap:10px;align-items:flex-end}.font-size-controls,.theme-controls,.spacing-controls{flex-wrap:wrap}.font-size-btn,.theme-btn,.spacing-btn{flex:none;min-width:calc(33.333% - 7px)}}@media (max-width:480px){.reader-main{padding:120px 0 40px}.reader-container{padding:15px}.reader-content{font-size:14px;max-height:50vh}.font-size-btn,.theme-btn,.spacing-btn{min-width:calc(50% - 5px)}}
.reader-page .header{background:rgba(10,26,45,.98)}
.reader-page .logo-link:hover .logo-icon{transform:rotate(15deg)}
.reader-page .bg-circle{animation-play-state:running!important}
/* Улучшенная светлая тема для читалки */
.reader-theme-light {
    --text-light: #1a365d;
    --text-gray: #4a5568;
    background: #f7fafc !important;
}

.reader-theme-light .reader-container {
    background: rgba(255, 255, 255, 0.98) !important;
    border: 1px solid #e2e8f0 !important;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
}

.reader-theme-light .reader-content {
    color: #2d3748 !important;
    background: white !important;
    border: 1px solid #e2e8f0;
    line-height: 1.8;
}

.reader-theme-light .book-header h1 {
    color: #1a202c !important;
}

.reader-theme-light .book-meta-info {
    color: #4a5568 !important;
}

.reader-theme-light .reader-btn,
.reader-theme-light .page-btn,
.reader-theme-light .tool-btn {
    background: rgba(226, 232, 240, 0.5) !important;
    border-color: #cbd5e0 !important;
    color: #4a5568 !important;
}

.reader-theme-light .reader-btn:hover,
.reader-theme-light .page-btn:hover,
.reader-theme-light .tool-btn:hover {
    background: rgba(203, 213, 224, 0.7) !important;
    border-color: #a0aec0 !important;
    color: #2d3748 !important;
}

.reader-theme-light .reading-progress {
    background: #e2e8f0 !important;
}

.reader-theme-light .progress-fill {
    background: linear-gradient(90deg, #4299e1, #90cdf4) !important;
}

/* Улучшенные настройки для светлой темы */
.reader-theme-light .modal-content {
    background: white !important;
    color: #2d3748 !important;
}

.reader-theme-light .setting-group h4 {
    color: #1a202c !important;
}

.reader-theme-light .font-size-btn,
.reader-theme-light .theme-btn,
.reader-theme-light .spacing-btn {
    background: #edf2f7 !important;
    border-color: #cbd5e0 !important;
    color: #4a5568 !important;
}

.reader-theme-light .font-size-btn.active,
.reader-theme-light .theme-btn.active,
.reader-theme-light .spacing-btn.active {
    background: #4299e1 !important;
    border-color: #4299e1 !important;
    color: white !important;
}

.reader-theme-light .font-select {
    background: #edf2f7 !important;
    border-color: #cbd5e0 !important;
    color: #2d3748 !important;
}

/* Аннотации */
.annotation-toolbar {
    position: absolute;
    display: none;
    background: var(--dark-bg);
    border: 1px solid rgba(144, 224, 239, 0.3);
    border-radius: 10px;
    padding: 10px;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
    z-index: 10000;
    backdrop-filter: blur(10px);
}

.annotation-tools {
    display: flex;
    gap: 8px;
    align-items: center;
}

.annotation-tool-btn {
    width: 36px;
    height: 36px;
    border-radius: 6px;
    background: rgba(144, 224, 239, 0.1);
    border: 1px solid rgba(144, 224, 239, 0.2);
    color: var(--softer-blue);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

.annotation-tool-btn:hover {
    background: rgba(144, 224, 239, 0.2);
    transform: translateY(-1px);
}

.color-picker {
    display: flex;
    gap: 4px;
    margin-left: 8px;
    padding-left: 8px;
    border-left: 1px solid rgba(144, 224, 239, 0.2);
}

.color-btn {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    border: 2px solid transparent;
    cursor: pointer;
    transition: all 0.2s ease;
}

.color-btn:hover {
    transform: scale(1.2);
}

.color-btn.active {
    border-color: white;
    box-shadow: 0 0 0 2px var(--softer-blue);
}

.annotation-highlight {
    position: relative;
    cursor: pointer;
}

.annotation-highlight:hover::after {
    content: attr(data-note);
    position: absolute;
    top: 100%;
    left: 0;
    background: var(--dark-bg);
    color: var(--soft-white);
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 12px;
    white-space: nowrap;
    z-index: 1000;
    border: 1px solid rgba(144, 224, 239, 0.3);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

.annotation-note-icon {
    display: inline-block;
    margin-left: 4px;
    color: #ffc107;
    cursor: pointer;
    font-size: 12px;
    vertical-align: super;
}

.annotation-underline {
    position: relative;
}

/* Оглавление */
.toc-search {
    display: flex;
    gap: 10px;
    margin: 15px 0;
}

.toc-search input {
    flex: 1;
    padding: 10px 15px;
    background: rgba(144, 224, 239, 0.1);
    border: 1px solid rgba(144, 224, 239, 0.2);
    border-radius: 8px;
    color: var(--soft-white);
}

.toc-stats {
    display: flex;
    justify-content: space-between;
    margin-bottom: 20px;
    padding: 15px;
    background: rgba(144, 224, 239, 0.05);
    border-radius: 10px;
    font-size: 14px;
    color: var(--soft-gray);
}

.toc-list {
    max-height: 500px;
    overflow-y: auto;
}

.toc-item {
    display: flex;
    align-items: center;
    padding: 15px;
    border-radius: 10px;
    margin-bottom: 10px;
    background: rgba(144, 224, 239, 0.05);
    border: 1px solid transparent;
    cursor: pointer;
    transition: all 0.3s ease;
}

.toc-item:hover {
    background: rgba(144, 224, 239, 0.1);
    border-color: rgba(144, 224, 239, 0.3);
    transform: translateX(5px);
}

.toc-item.active {
    background: rgba(144, 224, 239, 0.15);
    border-color: var(--softer-blue);
}

.toc-item-number {
    min-width: 50px;
    text-align: center;
    margin-right: 15px;
}

.chapter-number {
    display: block;
    font-size: 24px;
    font-weight: 700;
    color: var(--softer-blue);
}

.annotation-badge {
    display: inline-block;
    background: #ffc107;
    color: var(--dark-bg);
    font-size: 10px;
    padding: 2px 6px;
    border-radius: 10px;
    margin-top: 5px;
}

.toc-item-content {
    flex: 1;
}

.toc-item-content h4 {
    margin-bottom: 5px;
    color: var(--soft-white);
    font-size: 16px;
}

.toc-item-preview {
    font-size: 13px;
    color: var(--soft-gray);
    margin-bottom: 8px;
    line-height: 1.4;
}

.toc-item-meta {
    display: flex;
    gap: 15px;
    font-size: 12px;
    color: var(--soft-gray);
    opacity: 0.8;
}

.toc-item-actions {
    display: flex;
    gap: 5px;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.toc-item:hover .toc-item-actions {
    opacity: 1;
}

.toc-action-btn {
    width: 32px;
    height: 32px;
    border-radius: 6px;
    background: rgba(144, 224, 239, 0.1);
    border: 1px solid rgba(144, 224, 239, 0.2);
    color: var(--softer-blue);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

.toc-action-btn:hover {
    background: rgba(144, 224, 239, 0.2);
}

.toc-action-btn.active {
    background: var(--softer-blue);
    color: var(--dark-bg);
}

/* Поиск */
.search-highlight {
    background: rgba(255, 235, 59, 0.3);
    padding: 2px 0;
    border-radius: 2px;
}

.no-results {
    text-align: center;
    padding: 40px;
    color: var(--soft-gray);
    font-style: italic;
}

/* Анимации */
@keyframes pulse {
    0% { box-shadow: 0 0 0 0 rgba(144, 224, 239, 0.7); }
    70% { box-shadow: 0 0 0 10px rgba(144, 224, 239, 0); }
    100% { box-shadow: 0 0 0 0 rgba(144, 224, 239, 0); }
}